# 部署脚本说明

## 📁 脚本清单（极简版）

只保留3个核心脚本，总计316行代码：

### 1. **deploy.sh** (134行)
本地部署脚本，负责：
- 自动检测前端修改并构建
- 提交代码到GitHub
- 触发GitHub Actions自动部署

**使用方法：**
```bash
./deploy.sh              # 自动检测并部署
./deploy.sh --frontend   # 强制构建前端
./deploy.sh --force      # 跳过确认
./deploy.sh --help       # 查看帮助
```

### 2. **vps-update.sh** (117行)
VPS上执行的部署脚本，负责：
- 拉取最新代码
- 部署前端文件
- 执行数据库迁移
- 重启后端服务

**注意：** 此脚本在VPS上由GitHub Actions自动调用，无需手动执行。

### 3. **rollback.sh** (65行)
快速回滚脚本，负责：
- 回滚到上一个Git提交
- 强制推送到远程仓库
- 触发自动重新部署

**使用方法：**
```bash
./rollback.sh   # 回滚到上一个版本
```

## 🚀 部署流程

1. **日常部署**：在本地执行 `./deploy.sh`
2. **紧急回滚**：执行 `./rollback.sh`
3. **查看进度**：https://github.com/zylen97/research-dashboard/actions
4. **访问地址**：http://45.149.156.216:3001

## ⚡ 精简成果

- **脚本数量**：14个 → 3个（减少78%）
- **代码行数**：1974行 → 316行（减少84%）
- **复杂度**：大幅降低，每个脚本职责单一
- **维护成本**：极低，代码清晰易懂